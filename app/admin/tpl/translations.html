<div class="row">
    <div class="col-sm-4">
        <div class="card">
            <h5 class="card-header">Файлы</h5>
            <div class="card-body">
                {FILE_ROW}
            </div>
        </div>
        
    </div>
    <div class="col-sm-8">
        <div class="card">
            <h5 class="card-header">Переводы</h5>
            <div class="card-body" id="ajaxResult"></div>
        </div>
    </div>
</div>

<script>
    function editFile(path) {
        $.ajax({
            url: '<?php echo $this->urlFor("ajax/admin/load_file_langs") ?>',
            data: {path},
            type: 'POST',
            success: function(data){
                if(data.success){
                    $('#ajaxResult').html(data.html);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }
        });
    }

    function saveLang(form) {
        $.ajax({
            url: '<?php echo $this->urlFor("ajax/admin/save_lang") ?>',
            data: $(form).serialize(),
            type: 'POST',
            success: function(data){
                if(data.success){
                    Swal.fire({
                        icon: 'success',
                        title: 'Сохранено успешно',
                        showConfirmButton: false,
                        timer: 1500
                    })
                } else {
                    swal.fire('Error (Code: ' + data.error + ')');
                }
            }
        });
    }
</script>

<!-- [file_row] -->
<div style="display: flex; align-items: center;">
    <div class="mr-2">
        <button type="button" class="btn btn-sm btn-primary" onclick="editFile('{FILE_PATH}')">Edit</button>
    </div>
    <div style="<?php echo $IS_ADMIN_MODULE ? 'color: #FF2828' : '' ?>">{FILE_NAME}</div>
</div>
<hr>

<!-- [ajax_result] -->
<div></div>

{LANG_ROW}

<!-- [lang_row] -->
<form class="mb-2"> 

    <input type="hidden" name="file" value="{FILE_PATH}">

    <div style="display: flex" class="mb-2">
        <input class="form-control form-control-sm mr-2" type="text" name="langId" value="{LANG_ID}" readonly>
        <input class="form-control form-control-sm" type="text" value="{HTML_TEXT}" readonly>
    </div>

    {LANG_TRANSLATION}

    <button type="button" class="btn btn-sm btn-success" onclick="saveLang($(this).closest('form'))">Сохранить</button>
    </div>
</form>
<hr>

<!-- [lang_translation] -->
<div style="display: flex" class="mb-2">
    <input style="flex: 1" class="form-control form-control-sm mr-2" type="text" value="{TRANS_LANG}" readonly>
    <input style="flex: 9" class="form-control form-control-sm" type="text" name="translation[{TRANS_LANG}]" value="{TRANSLATION_VALUE}">
</div>
<!-- [-] -->