<div class="site__body">
    <div class="block-space block-space--layout--after-header"></div>
    <div class="block">
        <div class="container container--max--xl">
            <div class="row">
                <div class="col-12 col-lg-3 d-flex">
                    {PROFILE_MENU}
                </div>
                <div class="col-12 col-lg-9 mt-4 mt-lg-0">
                    <div class="addresses-list">
                        <a href="<?php echo $this->urlFor('profile/address_edit'); ?>" class="addresses-list__item addresses-list__item--new">
                            <div class="addresses-list__plus"></div>
                            <div class="btn btn-secondary btn-sm"><lang id='PROFILE_ADDRESS_L1'>Add New</lang></div>
                        </a>
                        <div class="addresses-list__divider"></div>
                        
                        {ADDRESS_BLOCK}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="block-space block-space--layout--before-footer"></div>
</div>

<script>
    function deleteAddress(recId) {
        $.ajax({
            url: '<?php echo $this->urlFor("ajax/profile/remove_address") ?>',
            data: {recId: recId},
            type: 'POST',
            success: function(data){
                if(data.success){
                    location.reload();
                } else {
                    Swal.fire(
                        'Error',
                        'System error (Code: ' + data.error + ')',
                        'error'
                    );
                }
            }
        });
    }
</script>

<!-- [address_block] -->
<div class="addresses-list__item card address-card">
    <?php if($IS_DEFAULT): ?>
        <div class="address-card__badge tag-badge tag-badge--theme"><lang id='PROFILE_ADDRESS_L2'>Default</lang></div>
    <?php endif; ?>
    <div class="address-card__body">
        <div class="address-card__name">{NAME} {SURNAME}</div>
        <div class="address-card__row">
            {ADDRESS}<br>
            {ADDRESS2}
        </div>
        <div class="address-card__row">
            <div class="address-card__row-title"><lang id='PROFILE_ADDRESS_L3'>Phone Number</lang></div>
            <div class="address-card__row-content">{PHONE}</div>
        </div>
        <div class="address-card__row">
            <div class="address-card__row-title"><lang id='PROFILE_ADDRESS_L4'>Email Address</lang></div>
            <div class="address-card__row-content">{EMAIL}</div>
        </div>
        <div class="address-card__footer">
            <a href="<?php echo $this->urlFor('profile/address_edit', ['recId' => $REC_ID]); ?>"><lang id='PROFILE_ADDRESS_L5'>Edit</lang></a>&nbsp;&nbsp;
            <a href="javascript:;" onclick="deleteAddress('{REC_ID}')"><lang id='PROFILE_ADDRESS_L6'>Remove</lang></a>
        </div>
    </div>
</div>
<div class="addresses-list__divider"></div>
<!-- [-] -->